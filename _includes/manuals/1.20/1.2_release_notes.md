## Release notes for {{page.version}}

This section will be updated prior to the next release.

### Headline features
#### UI Improvements

Multiple changes have been made in the graphical user interface, thanks to the
capabilities provided by the new react-based stack. These include a new design
for the Audits page, improved search bar and pagination, better navigation, and
many others fixes and improvements.

#### Report templates

A new mechanism has been added that allows generating custom reports.
See the [Reports](manuals/{{page.version}}/index.html#4.11Reports) section
for more information.

#### Template rendering engine rewrite

The engine used to render templates has been refactored to allow better
extendability and testing. Please report any issues found when rendering
templates after the upgrade.

#### Rails 5.2 upgrade

Foreman has been updated to run on the latest version of Ruby on Rails at the
time of the release, 5.2.1. Many plugins have already been updated as well, but
there may be issues with any that have not seen a new release in a while.

#### New system admin role

The purpose of this role is to set up environment for others to use. It can
create organizations/locations but does not have access to the resources inside
them. System admin can create new users and assign them to locations or
organizations and add roles to the users.  See
[Roles and Permissions](manuals/{{page.version}}/index.html#4.1.2RolesandPermissions)
for more information.

#### FIPS compliance

Foreman can now run properly in FIPS-enabled environments.

### Release notes for 1.20.0
#### API
* API hosts/X/facts still inconsistent ([#25188](https://projects.theforeman.org/issues/25188))
* Show hosts count in API ([#24782](https://projects.theforeman.org/issues/24782))
* Add hosts_count, can_edit/delete/create in Models API response ([#24227](https://projects.theforeman.org/issues/24227))
* hammer fact list: 'organization' not recognized for searching! ([#23979](https://projects.theforeman.org/issues/23979))
* API Support for easier use of Smart-Class Param Overrides ([#22090](https://projects.theforeman.org/issues/22090))

#### Audit Log
* Fact imports erranously cause audits to be created ([#25331](https://projects.theforeman.org/issues/25331))
* Audits display missing id for non-main objects changes ([#24844](https://projects.theforeman.org/issues/24844))
* audit search does not recognize subnet type anymore ([#24291](https://projects.theforeman.org/issues/24291))
* [RFE] New Audit UI as per new UX design ([#24245](https://projects.theforeman.org/issues/24245))
* Audits taxonomies are being set from current context for non-taxable resources ([#24234](https://projects.theforeman.org/issues/24234))
* Non admin user is unable to see the audits for katello and taxable resources created by admin using Any Location context ([#24232](https://projects.theforeman.org/issues/24232))
* Log audits per changed column ([#23610](https://projects.theforeman.org/issues/23610))

#### Authentication
* Hammer/API - wrong error message ([#24284](https://projects.theforeman.org/issues/24284))
* Change avatar make error 'undefined local variable or method \`old_avatar'' ([#12467](https://projects.theforeman.org/issues/12467))

#### Authorization
* User with restricted permissions sees all menu items ([#25346](https://projects.theforeman.org/issues/25346))
* Invalid single-table inheritance type: Host::Discovered is not a subclass of Host::Managed ([#25207](https://projects.theforeman.org/issues/25207))
* Foreman canned admin ([#24259](https://projects.theforeman.org/issues/24259))

#### Compute resources
* Compute resource test connection enables password field ([#24545](https://projects.theforeman.org/issues/24545))

#### Compute resources - EC2
* Add AWS Govcloud region to compute resource provider list  ([#15707](https://projects.theforeman.org/issues/15707))

#### Compute resources - OpenStack
* Can not start Stoped Openstack Servers ([#24965](https://projects.theforeman.org/issues/24965))

#### Compute resources - VMware
* Can not store "Add cdrom drive" on compute profile ([#24541](https://projects.theforeman.org/issues/24541))
* undefined method \`[]=' for #&lt;ActiveModel::Errors:0x00563e9032deb0&gt; with wrong ca cert on vmware ([#24526](https://projects.theforeman.org/issues/24526))

#### Compute resources - libvirt
* hammer host create returns ISE when LibVirt compute-resource is not in correct organization ([#24348](https://projects.theforeman.org/issues/24348))

#### Compute resources - oVirt
* Preallocate disk checkbox is broken for additional disks of a template ([#25225](https://projects.theforeman.org/issues/25225))
* 'Associate VM' works but 'Associate VMs' does not ([#24746](https://projects.theforeman.org/issues/24746))
* Not custom Instance type will override cores, sockets, memory and HA ([#24599](https://projects.theforeman.org/issues/24599))
* RHVv4 will not search in provided datacenter returns all VMs ([#24564](https://projects.theforeman.org/issues/24564))
* while creating new hosts RHEVM assocation of compute profile doesn't show correct network for the Cluster ([#24522](https://projects.theforeman.org/issues/24522))
* RHV4: Unable to do network provision host on RHV, auto selects blank template ([#24346](https://projects.theforeman.org/issues/24346))
* Create Host -&gt; RHEV Image: Incorrect CPU cores count filled when using APIv4 ([#23916](https://projects.theforeman.org/issues/23916))
* Could not create VM with memory smaller them 1 GB ([#23194](https://projects.theforeman.org/issues/23194))
* Datacenter in API should be UUID ([#22155](https://projects.theforeman.org/issues/22155))
* enable high availability when using ovirt compute resource  ([#17136](https://projects.theforeman.org/issues/17136))

#### Core
* Provide Ruby logger API method formatter ([#25267](https://projects.theforeman.org/issues/25267))
* Replace Ruby logging stack with logging gem ([#25100](https://projects.theforeman.org/issues/25100))

#### DHCP
* Failed to fetch a free IP from proxy - undefined local variable or method \`opts' for ms dhcp server:Proxy::DHCP::NativeMS::Provider ([#25024](https://projects.theforeman.org/issues/25024))
* ISC DHCP parser does not support DDNS entries ([#24978](https://projects.theforeman.org/issues/24978))
* Subnet_for call does not return record with highest CIDR netmask ([#24652](https://projects.theforeman.org/issues/24652))
* Incorrect error reporting for MS DHCP ([#24591](https://projects.theforeman.org/issues/24591))

#### Dashboard
* Unable to autoload constant Dashboard::Data ([#24760](https://projects.theforeman.org/issues/24760))

#### Database
* Get rid of useless db indices and imrpove index ordering ([#24256](https://projects.theforeman.org/issues/24256))

#### Development tools
* webpack is not inotified over NFS ([#24740](https://projects.theforeman.org/issues/24740))
* Align listening interface for Rails and Webpack in startup script ([#24720](https://projects.theforeman.org/issues/24720))
* add support for webpack-analyzer ([#24561](https://projects.theforeman.org/issues/24561))
* Fix ChartBox storybook ([#24200](https://projects.theforeman.org/issues/24200))
* Fix Rubocop: Style/ParallelAssignment ([#19886](https://projects.theforeman.org/issues/19886))
* Fix Rubocop: Style/LineEndConcatenation ([#19869](https://projects.theforeman.org/issues/19869))
* Fix Rubocop: Style/IfUnlessModifierOfIfUnless ([#19867](https://projects.theforeman.org/issues/19867))
* Fix Rubocop: Layout/SpaceBeforeBlockBraces ([#19790](https://projects.theforeman.org/issues/19790))

#### Facts
* Run expensive db_facts query just once and unordered ([#25053](https://projects.theforeman.org/issues/25053))
* add SR-IOV virtual functions to NIC ignore list for fact import ([#24476](https://projects.theforeman.org/issues/24476))
* When facts update operating system, medium can become invalid ([#24388](https://projects.theforeman.org/issues/24388))

#### Foreman modules
* Allow overriding the tftpd.map source location ([#25190](https://projects.theforeman.org/issues/25190))
* puppet agent starts before installer registers capsule to satellite and fails with registering the host ([#25036](https://projects.theforeman.org/issues/25036))
* PostgreSQL log is missing timestamps, making debugging harder ([#24998](https://projects.theforeman.org/issues/24998))
* foreman-release-scl-7-1.el7.noarch.rpm contains no repo file ([#24705](https://projects.theforeman.org/issues/24705))
* TFTP directory needs a symlink from grub2/boot to ../boot for UEFI HTTP Boot ([#24690](https://projects.theforeman.org/issues/24690))
* Add proxy name and url into scap settings ([#24505](https://projects.theforeman.org/issues/24505))
* remove useless email.yaml support from the installer ([#24399](https://projects.theforeman.org/issues/24399))
* Some TFTP files has incorrect permission 700 ([#24155](https://projects.theforeman.org/issues/24155))
* Foreman-Proxy: Add settings for new PuppetCA providers ([#24012](https://projects.theforeman.org/issues/24012))

#### Hammer CLI
* Use SPDX 2.0 codes
* Provides a way of listing compute attribute values ([#3651](http://projects.theforeman.org/issues/3651))
* Foreman CLI command for BMC boot commands ([#24099](http://projects.theforeman.org/issues/24099))
* Update VMware helpers and host create page ([#25192](http://projects.theforeman.org/issues/25192))
* Enable structured formatters for refernces. ([#24980](http://projects.theforeman.org/issues/24980))
* Correct homepage and license in the gemspec
* Display Host Status in Hammer ([#20187](http://projects.theforeman.org/issues/20187))
* Subnet create/update should accept proxy names ([#20609](http://projects.theforeman.org/issues/20609))
* Add Cluster option to Hammer CR. ([#24748](http://projects.theforeman.org/issues/24748))
* Retain data while host update in hammer ([#20725](http://projects.theforeman.org/issues/20725))
* Correct the gemspec ([PR #286](https://github.com/theforeman/hammer-cli/pull/286))
* Use the tty for the interactive output ([PR #289](https://github.com/theforeman/hammer-cli/pull/289)) ([#6935](http://projects.theforeman.org/issues/6935))
* Remove legacy code for ruby < 2.0 ([#21359](http://projects.theforeman.org/issues/21359))
* Verbose mode does not work and is inconsistent ([#14725](http://projects.theforeman.org/issues/14725))
* Enable formatters in json structured output ([PR #288](https://github.com/theforeman/hammer-cli/pull/288)) ([#24980](http://projects.theforeman.org/issues/24980))
* Hammer JSON output uses inconsistent capitalization ([#17010](http://projects.theforeman.org/issues/17010))
* Bump clamp dep to >=1.1 ([PR #282](https://github.com/theforeman/hammer-cli/pull/282))

#### Host creation
* Unable to create new host due to medium_provider error ([#24995](https://projects.theforeman.org/issues/24995))
* No local variable `host` exists. ([#24951](https://projects.theforeman.org/issues/24951))
* Use local instead of local_chain_hd0 default setting for local templates ([#24849](https://projects.theforeman.org/issues/24849))
* Deploying bonds and vlans does not work correctly ([#24753](https://projects.theforeman.org/issues/24753))
* Medium URL provider assumes managed host ([#24639](https://projects.theforeman.org/issues/24639))
* Root password is sometimes not encrypted correctly ([#24600](https://projects.theforeman.org/issues/24600))
* Clone button not shown in hosts show view ([#24078](https://projects.theforeman.org/issues/24078))

#### Host groups
* Host Group information when provisioning a discovered host doesn't autofill ([#24940](https://projects.theforeman.org/issues/24940))
* "Parameters" are missing from the GET hostgroup api output ([#24735](https://projects.theforeman.org/issues/24735))
* Hostgroup incorrectly marks OS fields as required ([#24471](https://projects.theforeman.org/issues/24471))
* Title "Global Parameters" should be removed from HG config page. ([#24392](https://projects.theforeman.org/issues/24392))
* after new host group is created search doesn't work properly, search menu opens the create host group ([#24303](https://projects.theforeman.org/issues/24303))
* Hostgroup provisioning does not work with Katello synced media ([#21105](https://projects.theforeman.org/issues/21105))

#### Internationalization
* move javascript JED / i18n translations code to webpack ([#17263](https://projects.theforeman.org/issues/17263))

#### Inventory
* Support for Debian on aarch64 aka arm64 ([#25215](https://projects.theforeman.org/issues/25215))
* Refactor UI to use hosts counter service better ([#24783](https://projects.theforeman.org/issues/24783))
* Assigning environment on hostgroup create doesn't check the assignment of organization/location ([#24647](https://projects.theforeman.org/issues/24647))
* When owner_id is specified by API: assume the User as owner_type by default ([#24322](https://projects.theforeman.org/issues/24322))
* Can not delete host if there are SCAP reports for that host ([#24269](https://projects.theforeman.org/issues/24269))
* Assigning environment on host create doesn't check the assignment of organization/location ([#24199](https://projects.theforeman.org/issues/24199))

#### JavaScript stack
* Audit page login text is not translated well ([#25269](https://projects.theforeman.org/issues/25269))
* webpack-analyze script fail if there is no public/webpack folder ([#25137](https://projects.theforeman.org/issues/25137))
* Remove eslint from hound-ci ([#24997](https://projects.theforeman.org/issues/24997))
* webpack build is broken when installing npm without optional dependecies ([#24832](https://projects.theforeman.org/issues/24832))
* update npm/NodeJS versions to reflect reality ([#24780](https://projects.theforeman.org/issues/24780))
* update react to 16.4 ([#24754](https://projects.theforeman.org/issues/24754))
* remove unneeded ACE editor syntax highlighting ([#24645](https://projects.theforeman.org/issues/24645))
* reduce js library duplication by plugins ([#24590](https://projects.theforeman.org/issues/24590))
* Enzyme 3.4.0 breaks snapshots  ([#24562](https://projects.theforeman.org/issues/24562))
* Add EmptyState to React components ([#24475](https://projects.theforeman.org/issues/24475))
* only load bookmarks when the dropdown is clicked ([#24380](https://projects.theforeman.org/issues/24380))

#### Logging
* Telemetry buckets need to be set in seconds, not miliseconds ([#24387](https://projects.theforeman.org/issues/24387))
* Foreman-debug does not include foreman-proxy-certs-generate.log ([#24386](https://projects.theforeman.org/issues/24386))

#### Monitoring
* Add ability to indicate a substatus ([#25124](https://projects.theforeman.org/issues/25124))
* Telemetry metric for audit creation ([#23417](https://projects.theforeman.org/issues/23417))

#### Network
* interfaces with uppercase characters in their name are not saved ([#24873](https://projects.theforeman.org/issues/24873))
* use non-legacy Puppet networking interface facts, when available ([#24744](https://projects.theforeman.org/issues/24744))
* Virtual interfaces are incorrectly updated from puppet facts when using facter 3.0 and above ([#24691](https://projects.theforeman.org/issues/24691))
* Concurrent creation of subnets can lead to records with duplicate names ([#24546](https://projects.theforeman.org/issues/24546))
* Unable to delete subnet NoMethodError: undefined method \`klass' for nil:NilClass ([#24478](https://projects.theforeman.org/issues/24478))
* API /api/hosts/:id returns inconsistent set of interfaces flags ([#20940](https://projects.theforeman.org/issues/20940))

#### Notifications
* Some plugins can't resolve notifications_recipient_path ([#25316](https://projects.theforeman.org/issues/25316))
* RSS rescheduling does not work anymore ([#25054](https://projects.theforeman.org/issues/25054))
* Allow notifications when login is disabled ([#24824](https://projects.theforeman.org/issues/24824))
* Add notification for removal of taxonomy/login settings ([#24800](https://projects.theforeman.org/issues/24800))
* Any error in CreateRssNotifications still marks the task as success and it doesn't re-schedule next event ([#24763](https://projects.theforeman.org/issues/24763))
* RSS fetch rake task defaults to 0 posts fetching ([#24520](https://projects.theforeman.org/issues/24520))

#### Organizations and Locations
* listing organization fails after adding default organization/location ([#24957](https://projects.theforeman.org/issues/24957))
* Error while assigning location to a number of hosts that is larger than per_page setting ([#24702](https://projects.theforeman.org/issues/24702))

#### Packaging
* Bump version of logging-journald to 2.x ([#25213](https://projects.theforeman.org/issues/25213))
* Remove LC_ALL=C from foreman-debug ([#24944](https://projects.theforeman.org/issues/24944))
* Older logging.yaml file breaks upgrade to Foreman 1.18 ([#24943](https://projects.theforeman.org/issues/24943))
* Use LGPLv2 for version 2 and 2.1 licenses in packaging. ([#24936](https://projects.theforeman.org/issues/24936))
* Ansible processes might get killed when logrotate runs for smart_proxy_dynflow_core ([#24927](https://projects.theforeman.org/issues/24927))
* Use the correct format for Apache 2.0 License ([#24922](https://projects.theforeman.org/issues/24922))
* Use the correct format for GPL version 3  ([#24920](https://projects.theforeman.org/issues/24920))
* the \_license macro causes build issues. We should not use this, and just hard code it ([#24919](https://projects.theforeman.org/issues/24919))
* update secure_headers to 6.x ([#24874](https://projects.theforeman.org/issues/24874))
* katello-debug.sh still calls katello-service status rather than foreman-maintain ([#24767](https://projects.theforeman.org/issues/24767))
* Update patternfly-sass gem dependency ([#24211](https://projects.theforeman.org/issues/24211))

#### Plugins-Engines
* add_permissions_to_default_roles fails during db:create ([#25312](https://projects.theforeman.org/issues/25312))
* Medium provider is not being loaded for Katello-managed hosts ([#25007](https://projects.theforeman.org/issues/25007))
* update deprecations for 1.20 ([#24343](https://projects.theforeman.org/issues/24343))
* Plugin DSL for role definition should allow specifying the description ([#19983](https://projects.theforeman.org/issues/19983))

#### Puppet integration
* Duplicate puppet classes are created when publishing content views in parallel ([#24633](https://projects.theforeman.org/issues/24633))
* Drop puppet related settings ([#23634](https://projects.theforeman.org/issues/23634))

#### PuppetCA
* PuppetCA migration does not work ([#24553](https://projects.theforeman.org/issues/24553))
* PuppetCA: Token Based Autosigning ([#23211](https://projects.theforeman.org/issues/23211))
* PuppetCA: Token Based Autosigning ([#23210](https://projects.theforeman.org/issues/23210))

#### RPMs
* plugins require rebuild when foreman changes its webpack vendor bundle ([#24928](https://projects.theforeman.org/issues/24928))
*  Systemd start for smart_proxy_dynflow_core failed! / \`strict_err': Gem loading error: cannot load such file -- foreman_ansible_core (RuntimeError) ([#24857](https://projects.theforeman.org/issues/24857))
* foreman-rake console produces warning messages ([#24605](https://projects.theforeman.org/issues/24605))
* angular-rails-templates uses MD5 causing problems FIPS-enabled envrionments ([#23312](https://projects.theforeman.org/issues/23312))

#### Rails
* Remove Rails 5.1 workaround for #24712 when upgrading to rails 5.2 ([#24831](https://projects.theforeman.org/issues/24831))
* add a read_attribute_before_type_cast method for settings ([#24737](https://projects.theforeman.org/issues/24737))
* Auto-reloader issues when code is change in develop environment ([#24710](https://projects.theforeman.org/issues/24710))
* With Rails 5.2 db:create fails when plugins present ([#24619](https://projects.theforeman.org/issues/24619))
* SettingTest#test_first_or_create_works fails with Rails 5.2 ([#23492](https://projects.theforeman.org/issues/23492))
* test 'should remove the key pair on compute resource deletion' fails with Rails 5.2 ([#22938](https://projects.theforeman.org/issues/22938))
* Switch over to Rails 5.2 ([#22612](https://projects.theforeman.org/issues/22612))
* Adapt to Rails 5.2 DB migration changes ([#22611](https://projects.theforeman.org/issues/22611))
* Rails 5.2 upgrade tasks ([#21834](https://projects.theforeman.org/issues/21834))
* Introduce bootsnap for faster bootup times ([#21833](https://projects.theforeman.org/issues/21833))

#### Reporting
* Expose the default attribute in the report templates API ([#25394](https://projects.theforeman.org/issues/25394))
* Report templates clone doesn't create clone but only renames the report ([#25367](https://projects.theforeman.org/issues/25367))
* Report templates need macros for easy report definition ([#25099](https://projects.theforeman.org/issues/25099))
* As a user i like to have an advanced reporting system with fully customizable reports ([#10521](https://projects.theforeman.org/issues/10521))

#### SELinux
* Hook execution generates warnings if no hooks are installed ([#24952](https://projects.theforeman.org/issues/24952))

#### Search
* search hosts performance is painfully slow ([#25154](https://projects.theforeman.org/issues/25154))
* Using has_many :through before the through association is defined interferes with scoped search ([#24486](https://projects.theforeman.org/issues/24486))
* Move the search box in Hardware Models to a React component ([#24040](https://projects.theforeman.org/issues/24040))

#### Security
* CVE-2018-14664 - Persisted XSS on all pages that use breadcrumbs ([#25169](https://projects.theforeman.org/issues/25169))
* toast notification sends strings through as HTML ([#24807](https://projects.theforeman.org/issues/24807))
* Deface uses MD5 and doesn't work in FIPS-enable environment ([#23128](https://projects.theforeman.org/issues/23128))
* Replace MD5 hashes with SHA ([#22119](https://projects.theforeman.org/issues/22119))
*  As a security person, I would like Foreman to run in FIPS mode ([#3511](https://projects.theforeman.org/issues/3511))

#### Settings
* When Setting has a "empty" default, the tool tip shows an empty string. ([#24870](https://projects.theforeman.org/issues/24870))
* Non-default settings should be bolded. ([#24835](https://projects.theforeman.org/issues/24835))
* remove taxonomy and login options from settings.yaml.example ([#24802](https://projects.theforeman.org/issues/24802))
* Suggest default dynflow log level to info ([#24620](https://projects.theforeman.org/issues/24620))
* Make SSH timeout configurable ([#24548](https://projects.theforeman.org/issues/24548))
* Remove modulepath setting ([#24381](https://projects.theforeman.org/issues/24381))
* Settings model have duplicate code on both create and create! class methods ([#24281](https://projects.theforeman.org/issues/24281))

#### Smart Variables
* Further sort smart class parameter overrides by value ([#24969](https://projects.theforeman.org/issues/24969))

#### Smart proxies
* Check before build checks required edit_smart_proxies permission ([#25248](https://projects.theforeman.org/issues/25248))
* belongs_to_proxy doesn't validate :required option ([#24935](https://projects.theforeman.org/issues/24935))
* Relax foreman proxy compatibility check condition ([#24567](https://projects.theforeman.org/issues/24567))

#### TFTP
* Template import from git, always adds newline ([#24672](https://projects.theforeman.org/issues/24672))
* Implement httpboot module ([#24631](https://projects.theforeman.org/issues/24631))
* UEFI HTTP PXE Loaders flags ([#24622](https://projects.theforeman.org/issues/24622))
* Change TFTP filename pattern to include unique installation media ID ([#19389](https://projects.theforeman.org/issues/19389))

#### Templates
* Registered host report fails if host has no owner set ([#25301](https://projects.theforeman.org/issues/25301))
* template sync for 1.20 broke snapshots ([#25214](https://projects.theforeman.org/issues/25214))
* kickstart default user_data and finish templates do not recognise "Red Hat Identity Management" as a realm_type ([#25172](https://projects.theforeman.org/issues/25172))
* regression: @dynamic in template is always false ([#25150](https://projects.theforeman.org/issues/25150))
* Template Renderer: Variables loader registry is not kept when the class is inherited ([#25128](https://projects.theforeman.org/issues/25128))
* Seed only templates that match installed plugins ([#25123](https://projects.theforeman.org/issues/25123))
* kickstart-default template does not recognise "Red Hat Identity Management" as a realm_type ([#25117](https://projects.theforeman.org/issues/25117))
* Formalize template inputs ([#25102](https://projects.theforeman.org/issues/25102))
* Can't preview templates from host show page ([#25075](https://projects.theforeman.org/issues/25075))
* Macro snippet_if_exists no longer works ([#25070](https://projects.theforeman.org/issues/25070))
* 500 Error when viewing CoreOS provisioning template. ([#25038](https://projects.theforeman.org/issues/25038))
* [Satellite 6.3] ansible_provisioning_callback snippet does not set executable permission for '/root/ansible_provisioning_call.sh' ([#24981](https://projects.theforeman.org/issues/24981))
* Set @kernel_uri and @initrd_uri variables ([#24745](https://projects.theforeman.org/issues/24745))
* ERF42-1709 Must supply an entity to find a medium provider during template render validation ([#24743](https://projects.theforeman.org/issues/24743))
* Refactor unattended_controller ([#24742](https://projects.theforeman.org/issues/24742))
* Improve support for liveimg ([#24557](https://projects.theforeman.org/issues/24557))
* snippets macro does not render a snippet partial from filesystem ([#24503](https://projects.theforeman.org/issues/24503))
* remove unattended helper ([#24496](https://projects.theforeman.org/issues/24496))
* snippet rendering should use source to find snippet ([#24484](https://projects.theforeman.org/issues/24484))
* refactor host_enc template macro to use reduce ([#24469](https://projects.theforeman.org/issues/24469))
* As a user I would like to create REX templates for Modularity Actions ([#24425](https://projects.theforeman.org/issues/24425))
* add snapshot tests for templates ([#24294](https://projects.theforeman.org/issues/24294))
* Provisioning a new host with bond interface without domain and subnet failed with undefined method \`vlanid' for nil:NilClass ([#24151](https://projects.theforeman.org/issues/24151))
* Support more complex logic for template locking ([#24102](https://projects.theforeman.org/issues/24102))
* Refactor Template rendering to use a proper rendering service ([#22529](https://projects.theforeman.org/issues/22529))
* Atomic Host 7.4.2 deployed from Foreman cannot be upgraded out of the box ([#22139](https://projects.theforeman.org/issues/22139))
* Templates tab in Hosts&gt;Operating Systems have confusing and misleading asterisks ([#22052](https://projects.theforeman.org/issues/22052))

#### Tests
* AuthorizeHelper not included in HostsHelper ([#25257](https://projects.theforeman.org/issues/25257))
* LoadError: cannot load such file -- database_cleaner when running foeman-rake on production DEBs ([#25091](https://projects.theforeman.org/issues/25091))
* Random failures in seeds test due to audit loading ([#24886](https://projects.theforeman.org/issues/24886))
* Intermittent API FactValuesControllerTest failures ([#24759](https://projects.theforeman.org/issues/24759))
* Refactor "Admin user should query Role model with no restrictions" test ([#24736](https://projects.theforeman.org/issues/24736))
* Host Assign Taxonomies radio button must be normalized  ([#24624](https://projects.theforeman.org/issues/24624))
* Add tests to 'load bookmarks on demand' ([#24544](https://projects.theforeman.org/issues/24544))
* Not able to run single tests via the line number ([#24293](https://projects.theforeman.org/issues/24293))
* Don't use expects in setup blocks ([#23344](https://projects.theforeman.org/issues/23344))
* Allow opt-out for minitest retry and test logger on failure/error ([#23336](https://projects.theforeman.org/issues/23336))

#### Trends
* NoMethodError on trends page ([#25351](https://projects.theforeman.org/issues/25351))

#### Unattended installations
* iPXE support ([#1459](https://projects.theforeman.org/issues/1459))

#### Users
* Creating user with hammer having authentication source LDAP/AD should not ask for password ([#24301](https://projects.theforeman.org/issues/24301))
* Permissions fail when connected to Facets  ([#24056](https://projects.theforeman.org/issues/24056))
* missing warning text or icon on user ssh keys page ([#21177](https://projects.theforeman.org/issues/21177))
* Roles cleared when error detected in User creation dialog ([#20992](https://projects.theforeman.org/issues/20992))

#### VM management
* Incorrect spelling of an operating systems list im provisioning cloud instances ([#24938](https://projects.theforeman.org/issues/24938))
* Flag to avoid deletion from compute resource of an host associated when it's removed from satellite ([#22737](https://projects.theforeman.org/issues/22737))

#### Web Interface
* vsphere datastore usage not visible ([#25253](https://projects.theforeman.org/issues/25253))
* compute resource test connection is html incorrectly escaped ([#25230](https://projects.theforeman.org/issues/25230))
* view chart buttons sometimes disappear after clicking ([#25203](https://projects.theforeman.org/issues/25203))
* SearchBar results keyboard arrows navigation doesn't work properly ([#25198](https://projects.theforeman.org/issues/25198))
* Searchbar's onChange debounce is too slow. ([#25197](https://projects.theforeman.org/issues/25197))
* webpack's Layout.scss imports css from assets pipeline  ([#25175](https://projects.theforeman.org/issues/25175))
* Hosts with no reports widget link generates incorrect search ([#25005](https://projects.theforeman.org/issues/25005))
* Add js sourcemaps for production webpack builds ([#24958](https://projects.theforeman.org/issues/24958))
* Breadcrumb bar for smart class parameter doesn't contain name. ([#24914](https://projects.theforeman.org/issues/24914))
* Breadcrumb bar on OS page doesn't show name of OS ([#24913](https://projects.theforeman.org/issues/24913))
* UI Spice console screen not in line with VNC console ([#24845](https://projects.theforeman.org/issues/24845))
* Storybook contains several minor bugs ([#24685](https://projects.theforeman.org/issues/24685))
* Strength indicator text covers validation errors, fields missing *  ([#24683](https://projects.theforeman.org/issues/24683))
* Breadcrumbs present on 500 page in production mode ([#24665](https://projects.theforeman.org/issues/24665))
* "Provision method can't be updated after host is provisioned" error when provision method is changed from implicit to explicit 'build' ([#24662](https://projects.theforeman.org/issues/24662))
* Move pagination to React ([#24643](https://projects.theforeman.org/issues/24643))
* Constrict resources showed by ResourceSwitcher to a custom scope ([#24621](https://projects.theforeman.org/issues/24621))
* Add UI devel docs into storybook ([#24416](https://projects.theforeman.org/issues/24416))
* RFE: Need ability to set filename in CSV response ([#24338](https://projects.theforeman.org/issues/24338))
* On some pages, breadcrumb bar shows wrong resource title ([#24315](https://projects.theforeman.org/issues/24315))
* Breadcrumb switcher in Smart class parameters has "Error: Unable to load resources" ([#24313](https://projects.theforeman.org/issues/24313))
* Breadcrumb switcher in Host Facts page is missing ([#24276](https://projects.theforeman.org/issues/24276))
* Creating/updating compute profile won't navigate back to compute profile page ([#24225](https://projects.theforeman.org/issues/24225))
* Broken Hosts breadcrumb link ([#24132](https://projects.theforeman.org/issues/24132))
* Breadcrumb bar's search field looks thicker on Firefox ([#23670](https://projects.theforeman.org/issues/23670))
* react implementation for navigation bar ([#23448](https://projects.theforeman.org/issues/23448))
* Change vertical menu to react implementation ([#23445](https://projects.theforeman.org/issues/23445))
* Failed generating link - undefined method \`split' for nil:NilClass ([#23168](https://projects.theforeman.org/issues/23168))
* firefox multiple select filter is too large ([#21885](https://projects.theforeman.org/issues/21885))
* top level vertical navigation menu is slow to respond ([#21566](https://projects.theforeman.org/issues/21566))
* Move novnc from vendor to npm ([#16294](https://projects.theforeman.org/issues/16294))

#### foreman-debug
* Foreman Debug does not gather production.log.gz anymore ([#24836](https://projects.theforeman.org/issues/24836))
* Update katello-debug.sh to collect puppet/reverse proxy logs and drop qpid stat for Pulp resource manager. ([#24312](https://projects.theforeman.org/issues/24312))

#### foreman-installer script
* Building the installer no longer uncomments the kafo_modules_dir ([#25304](https://projects.theforeman.org/issues/25304))
* Remove mapping changes in migrations ([#25055](https://projects.theforeman.org/issues/25055))

#### rake tasks
* don't initialize dynflow in db:create ([#24539](https://projects.theforeman.org/issues/24539))
* Single upgrade rake task ([#21938](https://projects.theforeman.org/issues/21938))

*A full list of changes in {{page.version}} is available via [Redmine](https://projects.theforeman.org/issues?set_filter=1&sort=id%3Adesc&status_id=closed&f[]=cf_12&op[cf_12]=%3D&v[cf_12][]=885)*

### Release notes for 1.20.1
#### API
* 'subtotal' is incorrect in API responses ([#25487](https://projects.theforeman.org/issues/25487))

#### Audit Log
* Audits contain no data (Added foo to Missing(ID: x)) ([#25437](https://projects.theforeman.org/issues/25437))

#### Compute resources
* compute resource host import does not correctly set the compute resource ([#25513](https://projects.theforeman.org/issues/25513))

#### DHCP
* DHCP ISC conf parser is unable to process interface-mtu option statement ([#25243](https://projects.theforeman.org/issues/25243))

#### Host creation
* NoMethodError: undefined method \`tr' for #<URI::Generic boot/windows-x86_64-w2k12-X4w09nh2RI/> ([#25621](https://projects.theforeman.org/issues/25621))

#### JavaScript stack
* make i18n js code more resilient to errors ([#25523](https://projects.theforeman.org/issues/25523))

#### Packaging
* Debian packages don't build localized js files ([#25517](https://projects.theforeman.org/issues/25517))

#### Plugins-Engines
* Let medium providers supply additional repositories ([#25285](https://projects.theforeman.org/issues/25285))

#### Puppet Reports
* foreman-rake reports:expire fails to run ([#24900](https://projects.theforeman.org/issues/24900))

#### Reporting
* Reports are being logged to blob logger ([#25620](https://projects.theforeman.org/issues/25620))
* Host status report produces empty line before CSV header ([#25486](https://projects.theforeman.org/issues/25486))
* Applicable errata reporting template missing ([#25484](https://projects.theforeman.org/issues/25484))

#### Search
* Unable to search host in host search box page ([#25548](https://projects.theforeman.org/issues/25548))

#### Settings
* Nil exception when talking to proxy with non-existing SSL certificate ([#25340](https://projects.theforeman.org/issues/25340))

#### Statistics
* Non-admin user can't generate report if it has any user input ([#25586](https://projects.theforeman.org/issues/25586))
* User input handled incorrectly in preview ([#25466](https://projects.theforeman.org/issues/25466))
* Preview host set should be limited or generating should be confirmed ([#25465](https://projects.theforeman.org/issues/25465))

#### TFTP
* Wrong provision method signature for RancherOS ([#25567](https://projects.theforeman.org/issues/25567))
* Use chronyd instead of ntp in provisioning templates on RHEL systems ([#24290](https://projects.theforeman.org/issues/24290))

#### Templates
* fix deprecation message for OS methods ([#25635](https://projects.theforeman.org/issues/25635))

*A full list of changes in 1.20.1 is available via [Redmine](https://projects.theforeman.org/issues?set_filter=1&sort=id%3Adesc&status_id=closed&f[]=cf_12&op[cf_12]=%3D&v[cf_12][]=952)*

### Deprecations

* The ability to disable login, organizations or locations via settings has been deprecated and will be
removed in version 1.21. Please enable these settings in your `settings.yaml` file.
* The `snippets` template macro has been deprecated and will be removed in 1.22, please use `snippet` instead.
* The `modulepath` setting had no effect and has been removed.
* Operating System `repos` method has been deprecated in favor of MediumProviders `additional_media` method and will be removed in 1.22. Please update any templates using this method to use the new method instead.
* Operating System `medium_uri` method has been deprecated in favor of MediumProviders `medium_uri` method and will be removed in 1.22. Please update any templates using this method to use the new method instead.
* The Operating System API endpoint for `bootfiles` has also been deprecated and will be removed in 1.22. Bootfiles should be calculated per host.

### Upgrade warnings

* A migration checking for duplicate puppet classes was added. If you see `Please make sure there are no
duplicate Puppet classes before continuing.` during upgrade process, your database contains multiple puppet
classes with the same name. This can happen on environments with many parallel operations happening at the
same time. In order to prevent this in future, we decided to add a constraint on database level. That also
means that existing duplicates need to be unified manually. Either delete all duplicates from `puppetclasses`
table or try using [foreman-maintain](https://github.com/theforeman/foreman_maintain) that should fix the issue.
For more information, see [the redmine issue](http://projects.theforeman.org/issues/24923/)
* A change introduced to the host fact API in 1.19.0 has led to incompatibilities and has been reverted.
Any scripts using this API may need to be updated accordingly.
See ([the redmine issue](https://projects.theforeman.org/issues/25188)) for more details.
* The ability to define `puppetconfdir`, `puppetvardir` and `puppetssldir` via `settings.yaml` has
been removed. The `ssl_certificate`, `ssl_ca_file` and `ssl_priv_key` options, which defaulted to using these
values as part of their default, should now be configured via the UI, CLI or API, or a default value for
them can be set directly in `settings.yaml` or via the installer.
* Access to `@host.params['param_name']` in templates, which has been deprecated several versions ago, has been removed. Templates can access host parameters using the `host_param('param_name')` macro instead.
* Operating System `pxe_files`, `pxe_prefix`, `kernel`, `initrd`, `bootfile`, `boot_files_uri`  methods now expect a Medium Provider as their first argument. Please update any templates accordingly. See the [redmine issue](https://projects.theforeman.org/issues/19389) and [associated changes](https://github.com/theforeman/foreman/commit/ef1bbc264acfe0864bd24e7ce54e6b37dcda37ad) for further details.
* The audit history doesn't display correctly if locations or organizations have been disabled in your settings.yaml. These options are now deprecated, see [the redmine issue](https://projects.theforeman.org/issues/24800) for more details.
* For installations with MySQL as a backend it must be version 5.7 to support index prefixes larger than 767 bytes. Older versions result in the db migration "Add type to token" failing and leaving the system unusable. Failed upgrades can be recovered by upgrading mysql to 5.7 then re-running the migration scripts.

### Contributors

We'd like to thank the following people who contributed to the Foreman {{page.version}} release:

Adam Ruzicka, Aditi Puntambekar, Akshay Mendhe, Alex Fisher, Alexander Olofsson, Amir Fefer, Amit Karsale, Andrew Kofink, Arend Lapere, Avi Sharvit, Ben Plessinger, Bernhard Suttner, Björn Zettergren, Boaz Shuster, Chris Duryee, Chris Roberts, Clemens Bergmann, Daniel Lobato Garcia, Djebran Lezzoum, Dustin Wheeler, Eric D. Helms, Evgeni Golov, Ewoud Kohl van Wijngaarden, François Cami, Gilad Lekner, Greg Sutcliffe, Herwig Bogaert, Iain Walmsley, Ian, Ian Ballou, Ido Kanner, Ivan Nečas, Jonathon Turel, Julian Todt, Justin Sherrill, Kamil Szubrycht, Kavita Gaikwad, Kenny Tordeurs, Kyle O Button, Liza Gilman, Lukáš Zapletal, Marek Hulán, Martin Bačovský, Matthias Baur, Matthias Dellweg, Michael Moll, Ohad Levy, Oleh Fedorenko, Ondřej Pražák, Ori Rabin, Partha Aji, Pat Riehecky, Pawel Moll, Peter Lehwess, Rahul Bajaj, Ron Lavi, Samir Jha, Sebastian Gräßl, Shimon Shtein, Shira Maximov, Simon Lauger, Stephen Benjamin, System 66, Thomas Morin, Timo Goebel, Tomas Strachota, Tomer Brisker, Zach Huntington-Meath, chris procter, d-m-u, sharkwouter


As well as all users who helped test releases, report bugs and provide feedback on the project.
